# 做T策略规范 v1.0（宽松版）

> **版本**: v1.0  
> **日期**: 2025-12-18  
> **验证标的**: 恩捷股份 002812.SZ (+181% vs 纯持有 -41%)

---

## 一、策略概述

### 1.1 核心思路
在持有股票的基础上，利用 KDJ 指标识别高抛低吸机会，通过 T+0 做差价降低持仓成本、增加收益。

### 1.2 适用场景
- 波动较大的个股（日均振幅 > 3%）
- 可接受较长持有周期
- 有时间盘中操作或收盘后复盘

### 1.3 策略验证结果（恩捷股份）
| 策略 | 期末收益率 | 成本变化 |
|------|-----------|---------|
| 30%底仓 + 70%做T | +180.93% | 80 → 44.74 |
| 纯持有不做T | -41.34% | 80 → 80 |

---

## 二、核心参数

### 2.1 仓位结构
```
总仓位 = 底仓（长持）+ T仓（做波段）

推荐配置:
- 激进型: 底仓 30-40%，T仓 60-70%
- 稳健型: 底仓 50-60%，T仓 40-50%
- 保守型: 底仓 70-80%，T仓 20-30%
```

### 2.2 KDJ 参数
- **周期**: 日线级别，n=9, m1=3, m2=3
- **高抛阈值**: J > 75
- **低吸阈值**: J < 25

### 2.3 辅助条件
- **波动过滤**: 日内振幅 > 2%（避免横盘时无效交易）
- **均线参考**: MA20 作为价格中枢

---

## 三、交易信号

### 3.1 高抛信号（卖出T仓）
同时满足以下条件:
1. `J > 75`
2. `当日振幅 > 2%`
3. `收盘价 > MA20`
4. `有可卖T仓（T+1可卖）`

**执行**: 卖出 1 档 T仓（建议每档 400 股或 10% 持仓）

### 3.2 低吸信号（买入T仓）
同时满足以下条件:
1. `J < 25`
2. `当日振幅 > 2%`
3. `收盘价 < MA20`
4. `T仓未满`

**执行**: 买入 1 档 T仓

### 3.3 冷却期
- 每次交易后冷却 **1 个交易日**
- 避免连续交易导致的过度频繁

---

## 四、T+1 约束处理

### 4.1 可卖仓位计算
```
可卖T仓 = 当前T仓持有 - 昨日买入量
```

### 4.2 仓位下限
- 任何时候至少保留 **1 手（100 股）**
- 底仓永不卖出

---

## 五、成本计算

### 5.1 交易成本
- **佣金**: 万分之 2.5（双向）
- **印花税**: 千分之 1（卖出）
- **综合成本**: 约 5bp / 笔

### 5.2 动态成本更新
```python
# 每次买入更新平均成本
新成本 = (原成本 × 原持仓 + 买入价 × 买入量) / 新总持仓
```

---

## 六、回测逻辑（伪代码）

```python
def simulate_t_trading(df, base_ratio, initial_shares, entry_cost):
    """
    df: 日线数据 (date, open, high, low, close, volume)
    base_ratio: 底仓比例 (0.3 ~ 0.8)
    initial_shares: 初始股数
    entry_cost: 初始成本
    """
    base_shares = int(initial_shares * base_ratio / 100) * 100
    t_shares_max = initial_shares - base_shares
    current_t = t_shares_max
    cash = 0
    cooldown = 0
    yesterday_bought = 0
    
    for each trading_day:
        # T+1: 昨日买入今日可卖
        sellable = current_t - yesterday_bought
        yesterday_bought = 0
        
        if cooldown > 0:
            cooldown -= 1
            continue
        
        # 计算指标
        j = calculate_kdj_j(df)
        intraday_range = (high - low) / close
        
        # 高抛
        if j > 75 and sellable >= 100 and close > ma20 and intraday_range > 0.02:
            sell(400)
            cooldown = 1
        
        # 低吸
        elif j < 25 and current_t < t_shares_max and close < ma20 and intraday_range > 0.02:
            buy(400)
            yesterday_bought = 400
            cooldown = 1
    
    return final_value, trades
```

---

## 七、风险提示

1. **回测不等于实盘**: 实际执行面临滑点、情绪、T+1 等约束
2. **标的选择重要**: 波动小的股票做T收益有限
3. **纪律执行**: 必须严格按信号执行，不追涨杀跌
4. **资金管理**: 单票仓位不宜过重

---

## 八、版本历史

| 版本 | 日期 | 变更 |
|------|------|------|
| v1.0 | 2025-12-18 | 初版：基于恩捷股份回测验证 |
